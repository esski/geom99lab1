<!DOCTYPE html>
<html>
  <head>
    <title>Story Map</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <style>
      body {
        font-family: Helvetica, Arial, sans-serif; /* Several fonts listed for fallback. */
      }
      h1 {
        padding: 1% 8%;
        font-size: 40pt;
      }
      h2 {
        font-size: 26pt;
      }
      #footer {
        position: relative;
        bottom: 0;
        width: 100%;
        height: 2.5rem;
        display: flex;
        justify-content: center;
      }
      .container {
        display: grid;
        justify-items: center;
        align-items: center;
        gap: 1em;
      }
      .container.text {
        justify-items: start;
        align-items: start;
        padding: 0 10%;
      }
      .container.map {
        margin: 20px 0 30px 0;
        padding-bottom: 2.5rem;
      }
      #mapdiv {
        height: 50vw;
        width: 80%;
      }
    </style>
    <script>
      let map;
      
      function initMap() {
        map = new google.maps.Map(document.getElementById("mapdiv"), {
          center: { lat: 43.658497, lng: -79.413695 },
          zoom: 12,
        });
        // Source: https://github.com/googlemaps/js-samples/tree/main/samples/marker-accessibility
        // Set LatLng and title text for the markers. The first marker (Boynton Pass)
        // receives the initial focus when tab is pressed. Use arrow keys to
        // move between markers; press tab again to cycle through the map controls.
        const yarnStores = [
          [{ lat: 43.662620, lng: -79.423650 }, "EweKnit & Craft"],
          [{ lat: 43.649720, lng: -79.427440 }, "The Knit CafÃ©"],
          [{ lat: 43.646840, lng: -79.406940 }, "Romni Wools Ltd"],
          [{ lat: 43.651520, lng: -79.409150 }, "Good Grief Yarn & Provisions"],
          [{ lat: 43.655030, lng: -79.403920 }, "Yarns Untangled"],
          [{ lat: 43.6804995, lng: -79.4174207 }, "Knit-O-Matic"],
        ];

        // Create an info window to share between markers.
        const infoWindow = new google.maps.InfoWindow();

        // Create the markers.
        yarnStores.forEach(([position, title], i) => {
          const marker = new google.maps.Marker({
            position,
            map,
            title: `${i + 1}. ${title}`,
            label: `${i + 1}`,
            optimized: false,
          });

          // Add a click listener for each marker, and set up the info window.
          marker.addListener("click", () => {
            infoWindow.close();
            infoWindow.setContent(marker.getTitle());
            infoWindow.open(marker.getMap(), marker);
          });
        });
      }
    </script>
  </head>
  <body>
    <header><h1>Story Map Title</h1></header>
    <div class="container text"><h2>The Map</h2></div>
    <div class="container text"><p>Text</p></div>
    <div class="container map">
      <div id="mapdiv">
      <script 
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDv3MGflguusDaLmV_-BUlmuoUI4EbM88w&callback=initMap&v=weekly" defer>
      </script>
      </div>
    </div>
    <footer id="footer"><p>Test for footer</p></footer>
  </body>
</html>
